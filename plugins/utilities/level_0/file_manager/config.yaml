name: "file_manager"
description: "Универсальная утилита для работы с файлами с поддержкой аудио и видео"
singleton: false
dependencies:
  utilities:
    - "logger"
    - "settings_manager"
settings:
  # Поддерживаемые расширения (опционально для проверки)
  audio_supported_extensions:
    type: list
    default: ["mp3", "ogg", "opus", "flac", "wav", "m4a", "aac"]
    description: "Поддерживаемые аудио расширения для проверки"
  
  video_supported_extensions:
    type: list
    default: ["mp4", "avi", "mov", "mkv", "webm"]
    description: "Поддерживаемые видео расширения для проверки"
  
  # Настройки обработки ошибок
  strict_mode:
    type: boolean
    default: false
    description: "Строгий режим - прерывать при первой ошибке"
  
  detailed_errors:
    type: boolean
    default: true
    description: "Возвращать детальные сообщения об ошибках"

interface:
  methods:
    validate_file:
      description: "Универсальная валидация файла"
      input:
        file_path:
          type: string
          description: "Путь к файлу для валидации"
        max_size_mb:
          type: float
          description: "Максимальный размер файла (МБ, опционально)"
        max_duration_seconds:
          type: integer
          description: "Максимальная длительность (секунды, опционально)"
        check_extension:
          type: boolean
          description: "Проверять поддерживаемое расширение"
        supported_extensions:
          type: list
          description: "Список поддерживаемых расширений (опционально)"
        check_exists:
          type: boolean
          description: "Проверять существование файла"
      output:
        type: dict
        description: "Результат валидации с деталями"
    get_file_extension:
      description: "Определение расширения файла по содержимому"
      input:
        file_path:
          type: string
          description: "Путь к файлу"
      output:
        type: dict
        description: "Информация о расширении файла"
    get_file_duration:
      description: "Получение длительности файла (аудио/видео)"
      input:
        file_path:
          type: string
          description: "Путь к файлу"
      output:
        type: dict
        description: "Длительность и информация о файле"
    get_content_type:
      description: "Определение Content-Type (MIME-типа) файла"
      input:
        file_path:
          type: string
          description: "Путь к файлу"
      output:
        type: dict
        description: "Content-Type и метод определения"
    get_audio_encoding:
      description: "Определение audio_encoding"
      input:
        file_path:
          type: string
          description: "Путь к файлу"
      output:
        type: dict
        description: "Audio encoding и метод определения"

features:
  - "Универсальная валидация файлов (аудио/видео)"
  - "Автоматическое определение типа файла"
  - "Определение расширений через MIME-типы"
  - "Определение Content-Type для HTTP запросов"
  - "Определение audio_encoding"
  - "Гибкие настраиваемые параметры"
  - "Детальная диагностика ошибок"
