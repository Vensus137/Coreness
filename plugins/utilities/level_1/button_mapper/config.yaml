name: "button_mapper"
description: "Маппинг текста кнопок в callback_data и быстрый поиск по ним на основе конфигов сценариев и триггеров."
singleton: true

dependencies:
  utilities:
    - "logger"

interface:
  methods:
    get_button_text:
      description: "Вернуть оригинальный текст кнопки по callback_data"
      input:
        callback_data:
          type: string
          description: "callback_data для поиска"
      output:
        type: string | null
        description: "Оригинальный текст кнопки или null, если не найдено"
    normalize:
      description: "Нормализовать текст кнопки для использования в callback_data (удаляет emoji, приводит к нижнему регистру, транслитерирует, убирает лишние символы, ограничивает длину)"
      input:
        text:
          type: string
          description: "Текст кнопки для нормализации"
      output:
        type: string
        description: "Нормализованный текст, пригодный для использования в callback_data (≤ 60 символов)"
features:
  - "Автоматически собирает тексты кнопок из сценариев и триггеров через ConfigManager"
  - "Поиск: сначала точное совпадение, затем первое вхождение"
  - "Не требует БД, работает на основе конфигов"
  - "Внутренний метод normalize() для нормализации текста"
  - "callback_data всегда ≤ 60 символов (лимит Telegram API 64 байта)" 