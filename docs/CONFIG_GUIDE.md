# –†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –±–æ—Ç–∞

‚ÑπÔ∏è –í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ ‚Äî –ø—Ä–∏–º–µ—Ä—ã –∏ –ø–æ—è—Å–Ω–µ–Ω–∏—è –ø–æ –æ—Å–Ω–æ–≤–Ω—ã–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º —Ñ–∞–π–ª–∞–º:
- **bot.yaml** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞, –∫–æ–º–∞–Ω–¥—ã, —Ä–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞.
- **triggers.yaml / group_triggers.yaml** ‚Äî –ø—Ä–∞–≤–∏–ª–∞ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –∏ callback —Å –¥–µ–π—Å—Ç–≤–∏—è–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (–¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∏ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–æ–≤).
- **settings.yaml** ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, queue_read_interval, batch_size –∏ –¥—Ä.). –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏–∑–º–µ–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤. 

**üí° –í–∞–∂–Ω–æ:** –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö `regex` –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Ä–∞–∑–º–µ—â–∞–π—Ç–µ –±–æ–ª–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –≤—ã—à–µ –º–µ–Ω–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–¥–µ—Ç –≤ –ø–æ—Ä—è–¥–∫–µ –∏—Ö –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª–µ. 

---

## üìã bot.yaml

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞, –∫–æ–º–∞–Ω–¥—ã, —Ä–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞.

### –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```yaml
commands:
  - command: "start"
    description: "–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É"
    scope: default                # (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî –¥–ª—è –≤—Å–µ—Ö)
  - command: "info"
    description: "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"
    scope: all_private_chats      # –¢–æ–ª—å–∫–æ –¥–ª—è –ª–∏—á–Ω—ã—Ö —á–∞—Ç–æ–≤
  - command: "groupstat"
    description: "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥—Ä—É–ø–ø—ã"
    scope: all_group_chats        # –¢–æ–ª—å–∫–æ –¥–ª—è –≤—Å–µ—Ö –≥—Ä—É–ø–ø
  - command: "admin"
    description: "–ê–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥–∞"
    scope: chat_member            # –¢–æ–ª—å–∫–æ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —á–∞—Ç–µ
    chat_id: 123456789
    user_id: 987654321

roles:
  admin:
    description: "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä"
    permissions: ["manage_users", "view_stats"]
    users: [111111111]
  user:
    description: "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"
    permissions: []
    users: [222222222, 333333333]
```

### –ü–æ—è—Å–Ω–µ–Ω–∏—è:

- **`commands`** ‚Äî —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤ Telegram.
- **`scope`** –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–æ–º—É –≤–∏–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞:
    - `default` ‚Äî –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ —è–≤–Ω–æ)
    - `all_private_chats` ‚Äî —Ç–æ–ª—å–∫–æ –≤ –ª–∏—á–Ω—ã—Ö —á–∞—Ç–∞—Ö
    - `all_group_chats` ‚Äî —Ç–æ–ª—å–∫–æ –≤ –≥—Ä—É–ø–ø–∞—Ö
    - `chat` ‚Äî –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —á–∞—Ç–∞ (—Ç—Ä–µ–±—É–µ—Ç `chat_id`)
    - `chat_member` ‚Äî –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —á–∞—Ç–µ (—Ç—Ä–µ–±—É–µ—Ç `chat_id` –∏ `user_id`)
- **`roles`** ‚Äî –æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —Ä–æ–ª–∏, –ø—Ä–∞–≤–∞ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (user_id).

---

## ‚öôÔ∏è settings.yaml

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.

### –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```yaml
service_name_1:
  setting_name_1: value1
  setting_name_2: value2

service_name_2:
  setting_name_3: value3
  # ...
```

### –ü–æ—è—Å–Ω–µ–Ω–∏—è:

- **`settings.yaml`** ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–µ—Ä–≤–∏—Å–æ–≤.
- –ö–∞–∂–¥–∞—è —Å–µ–∫—Ü–∏—è ‚Äî —ç—Ç–æ –∏–º—è —Å–µ—Ä–≤–∏—Å–∞, –≤–Ω—É—Ç—Ä–∏ ‚Äî –ª—é–±—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —ç—Ç–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞.
- –û–ø–∏—Å–∞–Ω–∏–µ –∏ —Å–º—ã—Å–ª –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–º–æ—Ç—Ä–∏—Ç–µ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö config.yaml —Å–µ—Ä–≤–∏—Å–æ–≤.
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Å–µ–∫—Ü–∏–∏ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏.

---

## üîó triggers.yaml –∏ group_triggers.yaml

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–∞–≤–∏–ª–∞ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –∏ callback —Å –¥–µ–π—Å—Ç–≤–∏—è–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.

### –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```yaml
text:
  exact:
    "/start": "command.start"
    "/help": "command.help"
  state:
    "feedback": "request_test.request_feedback"
  regex:
    "^/start\\s+\\w+\\s+\\w+\\s+\\w+$": "trigger_test.regex_start_with_three_params"
    "^/start\\s+\\w+\\s+\\w+$": "trigger_test.regex_start_with_two_params"
    "^/config\\s+\\w+\\s+\\w+\\s+\\w+$": "trigger_test.regex_config_with_three_params"
  starts_with:
    "/help": "trigger_test.starts_with_help"
    "/admin": "trigger_test.starts_with_admin"
  contains:
    "–ø–æ–º–æ—â—å": "command.help"
  
callback:
  exact:
    "–ù–∞–∑–∞–¥": "main_menu"
    "–ü–æ–¥—Ä–æ–±–Ω–µ–µ": "show_details"
  state:
    "awaiting_confirm": "confirm_scenario"
    "edit_mode": "edit_scenario"
  contains:
    "–µ—â—ë": "more_details"
```

### –ü–æ—è—Å–Ω–µ–Ω–∏—è:

- –ü—Ä–∏–º–µ—Ä –≤—ã—à–µ –ø—Ä–∏–º–µ–Ω–∏–º –∫–∞–∫ –¥–ª—è `triggers.yaml`, —Ç–∞–∫ –∏ –¥–ª—è `group_triggers.yaml` ‚Äî —Ä–∞–∑–Ω–∏—Ü–∞ —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º, —á—Ç–æ –æ–±—ã—á–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —á–∞—Ç–∞—Ö –∏ –≥—Ä—É–ø–ø–∞—Ö, –∞ –≥—Ä—É–ø–ø–æ–≤—ã–µ ‚Äî —Ç–æ–ª—å–∫–æ –≤ –≥—Ä—É–ø–ø–∞—Ö.
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤** (–ø–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏): `exact` ‚Üí `state` ‚Üí `regex` ‚Üí `starts_with` ‚Üí `contains`
- –í–Ω—É—Ç—Ä–∏ —Å–µ–∫—Ü–∏–π `text` –∏ `callback` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–¥—Ç–∏–ø—ã:
    - `exact` ‚Äî —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
    - `state` ‚Äî —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ —Ç–µ–∫—É—â–µ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ —á–∞—Ç–∞
    - `regex` ‚Äî —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤)
    - `starts_with` ‚Äî —Å—Ç—Ä–æ–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤)
    - `contains` ‚Äî —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, –µ—Å–ª–∏ —Ç–µ–∫—Å—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥—Å—Ç—Ä–æ–∫—É (–Ω–∏–∑—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
- **–í–∞–∂–Ω–æ:** –í—Å–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –Ω–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Å–µ–≥–¥–∞ –≤–µ–¥—ë—Ç—Å—è –≤ –Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ.
- **–ü–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏:** –í–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–¥—ë—Ç –≤ –ø–æ—Ä—è–¥–∫–µ –∏—Ö –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª–µ. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –¥–ª—è `regex` ‚Äî —Ä–∞–∑–º–µ—â–∞–π—Ç–µ –±–æ–ª–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –≤—ã—à–µ –º–µ–Ω–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö.
- **Regex —Ç—Ä–∏–≥–≥–µ—Ä—ã:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤ –∫–æ–º–∞–Ω–¥. –ù–∞–ø—Ä–∏–º–µ—Ä, `^/start\\s+\\w+\\s+\\w+$` —Å—Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ `/start param1 param2`. –ü–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω: —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –ø–∞—Ç—Ç–µ—Ä–Ω—ã —Å 4 –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, –ø–æ—Ç–æ–º —Å 3, –ø–æ—Ç–æ–º —Å 2.
- **Starts_with —Ç—Ä–∏–≥–≥–µ—Ä—ã:** –£–¥–æ–±–Ω—ã –¥–ª—è –∫–æ–º–∞–Ω–¥, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –∏–º–µ—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, `/start` —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ `/start`, `/start param1`, `/start param1 param2` –∏ —Ç.–¥.
- **Contains —Ç—Ä–∏–≥–≥–µ—Ä—ã:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ ‚Äî –º–æ–≥—É—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä, `"–ø–æ–º–æ—â—å"` —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ "–ú–Ω–µ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å", "–ü–æ–º–æ—â—å –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ" –∏ —Ç.–¥.
- –ó–Ω–∞—á–µ–Ω–∏—è —Å–ø—Ä–∞–≤–∞ ‚Äî —ç—Ç–æ –∫–ª—é—á —Å—Ü–µ–Ω–∞—Ä–∏—è, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, `command.start`).