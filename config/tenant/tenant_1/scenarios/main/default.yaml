# ============================================
# Default Scenarios
# Purpose: universal scenarios for automatic processing
# ============================================

# ============================================
# BLOCK 1: Delete Command Message
# ============================================

# Automatic deletion of command messages
# Triggers automatically for all commands (starting with /)
delete_command_message:
  description: "Automatic deletion of original message for all commands"
  
  trigger:
    - event_type: "message"
      condition: "$event_text regex '^/'"
  
  step:
    # Delete command message
    - action: "delete_message"
      params:
        delete_message_id: "{message_id}"

# ============================================
# BLOCK 2: Check Message
# ============================================

# Check that text is not a command
# Called programmatically from other scenarios via execute_scenario
check_message:
  description: "Check that message text does not start with '/' (is not a command)"
  
  step:
    # Check that text is not a command
    - action: "validate"
      params:
        condition: '$event_text regex "^/.*"'
      transition:
        - action_result: "success"
          transition_action: "abort"      # If it's a command - abort execution
        - action_result: "failed"
          transition_action: "continue"   # If not a command - continue execution

# ============================================
# BLOCK 3: Default Check
# ============================================
default_check:
  description: "Default check"

  step:
    - action: "execute_scenario"
      params:
        scenario: "access_check"

    - action: "execute_scenario"
      params:
        scenario: "settings_check"