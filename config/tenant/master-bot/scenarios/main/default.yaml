# ============================================
# Дефолтные сценарии
# Назначение: универсальные сценарии для автоматической обработки
# ============================================

# Автоматическое удаление сообщений команд
# Срабатывает автоматически для всех команд (начинающихся с /)
delete_command_message:
  description: "Автоматическое удаление исходного сообщения для всех команд"
  
  trigger:
    - event_type: "message"
      condition: "$event_text regex '^/'"
  
  step:
    # Удаляем сообщение команды
    - action: "delete_message"
      params:
        delete_message_id: "{message_id}"

# Проверка, что текст не является командой
# Вызывается программно из других сценариев через execute_scenario
check_message:
  description: "Проверка, что текст сообщения не начинается с '/' (не является командой)"
  
  step:
    # Проверяем, что текст не является командой
    - action: "validate"
      params:
        condition: '$event_text regex "^/.*"'
      transition:
        - action_result: "success"
          transition_action: "abort"      # Если это команда - прерываем выполнение
        - action_result: "failed"
          transition_action: "continue"   # Если не команда - продолжаем выполнение

