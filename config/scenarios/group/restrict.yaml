restrict_test:
  actions:
    - type: scenario
      value: group.restrict.restrict_permissions_check
    - type: scenario
      value: group.restrict.restrict_extract_duration
    - type: scenario
      value: group.restrict.restrict_extract_username
    - type: scenario
      value: group.restrict.restrict_mute_result

restrict_extract_duration:
  actions:
    - type: validator
      duration: "{event_text|regex:(?:\\d+\\s*[wdhms]\\s*)+}"
      placeholder: true
      chain: true
    - type: validator
      rules:
        duration:
          - rule: "not_empty"
      chain: true
    - type: "send"
      text: "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∏–∑–≤–ª–µ—á—å –≤—Ä–µ–º—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è"
      callback_edit: false
      chain: failed
      chain_drop: completed
    - type: validator
      chain: true

restrict_extract_username:
  actions:
    - type: validator
      restrict_username: "{event_text|regex:@\\w+}"
      placeholder: true
      chain: true
    - type: validator
      rules:
        restrict_username:
          - rule: "not_empty"
      chain: true
    - type: validator
      restrict_username: "{reply_username}"
      restrict_user_id: "{reply_user_id}"
      placeholder: true
      chain: failed
    - type: validator
      rules:
        restrict_user_id:
          - rule: "not_empty"
      chain: ["completed", "failed"]
    - type: "send"
      text: "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∏–∑–≤–ª–µ—á—å username"
      callback_edit: false
      chain: failed
      chain_drop: completed
    - type: validator
      chain: true

restrict_mute_result:
  actions:
    - type: "restrict"
      can_send_messages: false
      chain: completed
    - type: "send"
      text: "üîí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {restrict_username} –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –Ω–∞ {duration_seconds} —Å–µ–∫—É–Ω–¥"
      callback_edit: false
      chain: completed
      chain_drop: completed
    - type: "send"
      text: "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
      callback_edit: false 
      chain: true

restrict_unmute_result:
  actions:
    - type: "restrict"
      can_send_messages: true
      chain: completed
    - type: "send"
      text: "‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {restrict_username} —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω"
      callback_edit: false
      chain: completed
      chain_drop: completed
    - type: "send"
      text: "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
      callback_edit: false 
      chain: true

restrict_unmute:
  actions:
    - type: scenario
      value: group.restrict.restrict_permissions_check
    - type: scenario
      value: group.restrict.restrict_extract_username
    - type: "restrict"
      can_send_messages: true
      chain: completed
    - type: "send"
      text: "‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {restrict_username} —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω"
      callback_edit: false
      chain: completed
      chain_drop: completed
    - type: "send"
      text: "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {restrict_username} {restrict_user_id}"
      callback_edit: true 
      chain: true

restrict_permissions_check:
  actions:
    - type: validator
      group_admin: true
      chain: true
      chain_drop: failed