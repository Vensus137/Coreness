chain_main:
  actions:
    - type: send
      text: |
        üîó –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–ø–æ—á–µ–∫ –¥–µ–π—Å—Ç–≤–∏–π
        
        –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É —Ä–∞–∑–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ chain:
        ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ø–æ—á–∫–∏ (7 –¥–µ–π—Å—Ç–≤–∏–π —Å chain_drop)
        ‚Äî –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (—Ä–∞–∑–≤–µ—Ç–≤–ª–µ–Ω–∏–µ –Ω–∞ 2 —Ü–µ–ø–æ—á–∫–∏)
      inline:
        - ["–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ü–µ–ø–æ—á–∫—É"]
        - ["–í–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏", "–î—Ä–æ–ø –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤"]
        - [{"–ù–∞–∑–∞–¥": "start_menu"}]

check_chain:
  actions:
    - type: send
      text: "–î–µ–π—Å—Ç–≤–∏–µ 1: –≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è"
      callback_edit: false
    - type: send
      callback_edit: false
      chain: true
    - type: send
      text: "–î–µ–π—Å—Ç–≤–∏–µ 3: chain: failed (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ 2 –∑–∞–≤–µ—Ä—à–∏–ª–æ—Å—å —Å –æ—à–∏–±–∫–æ–π)"
      callback_edit: false
      chain: failed
    - type: send
      text: "–î–µ–π—Å—Ç–≤–∏–µ 4: chain: completed (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ 3 –∑–∞–≤–µ—Ä—à–∏–ª–æ—Å—å —É—Å–ø–µ—à–Ω–æ)"
      callback_edit: false
      chain: completed
    - type: send
      callback_edit: false
      chain: completed
      chain_drop: failed
    - type: send
      text: "–î–µ–π—Å—Ç–≤–∏–µ 6: –ù–ï –î–û–õ–ñ–ù–û –í–´–ü–û–õ–ù–ò–¢–¨–°–Ø (–ø–æ—Å–ª–µ –ø–∞–¥–µ–Ω–∏—è 5 —Å chain_drop)"
      callback_edit: false
      chain: true
    - type: send
      text: "–î–µ–π—Å—Ç–≤–∏–µ 7: –¢–û–ñ–ï –ù–ï –î–û–õ–ñ–ù–û –í–´–ü–û–õ–ù–ò–¢–¨–°–Ø (–ø–æ—Å–ª–µ –ø–∞–¥–µ–Ω–∏—è 5 —Å chain_drop)"
      callback_edit: false
      chain: true

# =============================================================================
# –¢–ï–°–¢ –í–õ–û–ñ–ï–ù–ù–´–• –°–¶–ï–ù–ê–†–ò–ï–í –° –†–ê–ó–í–ï–¢–í–õ–ï–ù–ò–ï–ú
# =============================================================================

nested_chains:
  actions:
    - type: send
      text: |
        üîó –¢–µ—Å—Ç: –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
        
        –ù–∞—á–∏–Ω–∞–µ–º –æ—Å–Ω–æ–≤–Ω—É—é —Ü–µ–ø–æ—á–∫—É...
      inline:
        - [{"–ù–∞–∑–∞–¥": "chain_main"}]
      callback_edit: false
      chain: true
    - type: scenario
      value: ["test_chain.branch_a", "test_chain.branch_b"]
    - type: send
      text: |
        ‚úÖ –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
        
        –ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∑–Ω–∞—á–∏—Ç –æ–±–µ –≤–µ—Ç–∫–∏ (A –∏ B) –≤—ã–ø–æ–ª–Ω–∏–ª–∏—Å—å —É—Å–ø–µ—à–Ω–æ.
      inline:
        - [{"–ù–∞–∑–∞–¥": "chain_main"}]
      callback_edit: false
      chain: completed

# –í–µ—Ç–∫–∞ A - —É—Å–ø–µ—à–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞
branch_a:
  actions:
    - type: send
      text: "üåø –í–µ—Ç–∫–∞ A: –î–µ–π—Å—Ç–≤–∏–µ 1"
      callback_edit: false
      chain: true
    - type: send
      text: "üåø –í–µ—Ç–∫–∞ A: –î–µ–π—Å—Ç–≤–∏–µ 2"
      callback_edit: false
      chain: true
    - type: send
      text: "üåø –í–µ—Ç–∫–∞ A: –î–µ–π—Å—Ç–≤–∏–µ 3 (–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ)"
      callback_edit: false
      chain: true

# –í–µ—Ç–∫–∞ B - —Ü–µ–ø–æ—á–∫–∞ —Å –æ—à–∏–±–∫–æ–π
branch_b:
  actions:
    - type: send
      text: "üåø –í–µ—Ç–∫–∞ B: –î–µ–π—Å—Ç–≤–∏–µ 1"
      callback_edit: false
      chain: true
    - type: send
      text: "üåø –í–µ—Ç–∫–∞ B: –î–µ–π—Å—Ç–≤–∏–µ 2 (—Å –æ—à–∏–±–∫–æ–π)"
      callback_edit: false
      chain: failed
    - type: send
      text: "üåø –í–µ—Ç–∫–∞ B: –î–µ–π—Å—Ç–≤–∏–µ 3 (–ù–ï –î–û–õ–ñ–ù–û –í–´–ü–û–õ–ù–ò–¢–¨–°–Ø)"
      callback_edit: false
      chain: completed

# –¢–µ—Å—Ç —Ä–∞–∑–≤–µ—Ç–≤–ª–µ–Ω–∏—è —Å —Ä–∞–∑–Ω—ã–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏
drop_nested_chains:
  actions:
    - type: send
      text: |
        üîó –¢–µ—Å—Ç: –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
        
        –ù–∞—á–∏–Ω–∞–µ–º –æ—Å–Ω–æ–≤–Ω—É—é —Ü–µ–ø–æ—á–∫—É, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–ª–∂–Ω–∞ –ø—Ä–µ—Ä–≤–∞—Ç—å—Å—è –Ω–∞ 2 –¥–µ–π—Å—Ç–≤–∏–∏...
      inline:
        - [{"–ù–∞–∑–∞–¥": "chain_main"}]
      callback_edit: false
      chain: true
    - type: send
      callback_edit: false
      chain: true
      chain_drop: failed
    - type: scenario
      value: ["test_chain.branch_a", "test_chain.branch_b"]
      chain: any
    - type: send
      text: |
        ‚úÖ –†–∞–∑–≤–µ—Ç–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ
        
        –í–µ—Ç–∫–∞ A –≤—ã–ø–æ–ª–Ω–∏–ª–∞—Å—å —É—Å–ø–µ—à–Ω–æ, –í–µ—Ç–∫–∞ B –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —Å –æ—à–∏–±–∫–æ–π.
      inline:
        - [{"–ù–∞–∑–∞–¥": "chain_main"}]
      callback_edit: false
      chain: true